## Profesor: Edwin Montoya, Universidad EAFIT, Medellín-Colombia
## emontoya@eafit.edu.co

# primeros pasos con Kibana - webinar:

https://www.elastic.co/es/webinars/getting-started-kibana

# instalar:

    AWS EC2: t2.large / 20 GB DD (Recuerde abrir el puerto 5601 en la instancia para conectarse remotamente)

    pre-requisito: https://geekflare.com/install-chromium-ubuntu-centos/ (instalar chromium)

    curl -O https://artifacts.elastic.co/downloads/kibana/kibana-8.15.3-linux-x86_64.tar.gz

    tar -xzf kibana-8.15.3-linux-x86_64.tar.gz

    cd kibana-8.15.3

## descomentar en: config/kibana.yml:

    nano config/kibana.yml

    elasticsearch.hosts: ["http://localhost:9200"]
    server.port: 5601
    server.host: "0.0.0.0"

## ejecutar servidor:

    nohup bin/kibana &

## entrar a un browser:

    http://<ip-aws>:5601

    para probar desde un navegador en eafit, como los puertos están cerrados, abrir un tunnel SSH hacia la máquina EC2 así:

    (descarga el labsuser.pem)

    $ ssh -i labsuser.pem ubuntu@ip-publica-vm -L 5601:ip-privada-vm:5601

    http://localhost:5601

Le pedirá el "Enrollment token", el cual puede observar en el link "Where do I find this":

EN EL DIRECTORIO DE ELASTICSEARCH, ejecutar:

    cd elasticsearch-8.15.3/
    bin/elasticsearch-create-enrollment-token --scope kibana

genera una salida asi:

    [ec2-user@ip-172-31-26-49 elasticsearch-8.15.3]$ bin/elasticsearch-create-enrollment-token --scope kibana
    eyJ2ZXIiOiI4LjUuMCIsImFkciI6WyIxNzIuMzEuMjYuNDk6OTIwMCJdLCJmZ3IiOiJhYWE4MGVkOTU3N2MzN2E4MmNmMGMwYTM0MWZlNjU0ODExNmQyZGNmYmViYTEzMjE4ZTQzNDM5ZWYzMjNhZThhIiwia2V5IjoiRHhMM1FvUUJuam5NOEZyYndveEM6VUhNWVdZVHBTZ21vQ1JzUUYyUkwtZyJ9
    [ec2-user@ip-172-31-26-49 elasticsearch-8.15.3]$

copie esa clave, le da 'paste' en kibana:

LUEGO SOLICITA UN CÓDIGO DE VERIFICACIÓN DE 6 DÍGITOS, QUE SE OBTIENE ASI:

    cd kibana-8.15.3
    bin/kibana-verification-code

GENERA UNA SALIDA ASI:

    [ec2-user@ip-172-31-26-49 kibana-8.15.3]$ bin/kibana-verification-code
    Your verification code is:  527 244 
    [ec2-user@ip-172-31-26-49 kibana-8.15.3]$ 

Digite esos 6 digitos en el browser de Kibana:

    527 244 

### luego pide un usuario y clave de elastic, se genera asi:

    el username es 'elastic'

Se resetea la clave con:

    cd elasticsearch-8.15.3/
    bin/elasticsearch-reset-password -u elastic

Salida asi:

    [ec2-user@ip-172-31-26-49 elasticsearch-8.15.3]$ bin/elasticsearch-reset-password -u elastic
    This tool will reset the password of the [elastic] user to an autogenerated value.
    The password will be printed in the console.
    Please confirm that you would like to continue [y/N]y


    Password for the [elastic] user successfully reset.
    New value: Tdk4e_wB0=UCzID+i0Cr
    [ec2-user@ip-172-31-26-49 elasticsearch-8.15.3]$

    la nueva clave sera: Tdk4e_wB0=UCzID+i0Cr

## en el browser de Kibana, cargue los datos ejemplo que trae Kibana:

    Menu: [D] Default -> "Manage spaces" -> Kibana/Data Views -> Add sample data:

    puede trabajar con: "start exploring" (va a la nube al sitio de elastic.co)

    o

    > Other sample data sets  (Alli hay 3 conjuntos de datos para explorar)  (usa los propios datos de este servidor, opción recomendada) 

        Sample eCommerce orders -> Add data
        Sample flight data -> Add data
        Sample web logs -> Add data

UNA VEZ CARGUE LOS DATOS EJEMPLO, PUEDE:

    Discover
    Dashboards
    Canvas
    Map

    Discover: permite ejecutar queries, filtrar campos, visualizar, etc. es una muy buena opción para aprender.

    Dashboards: permite crear tableros de visualización con base en los datos cargados.
